import{h as t,H as s}from"./p-0f61cfe6.js";import{f as i,c as n,g as e}from"./p-481b0b7a.js";import{d as r}from"./p-73e5061d.js";import{g as a}from"./p-0ae16e31.js";import{C as o}from"./p-39515aa9.js";function c(){this.setUpItems(),this.setUpFilter()}const h=["ArrowUp","ArrowDown"];function l(){this.setUpItems(),this.setUpFilter(),this.emitCalciteListChange=r(b.bind(this),0)}function u(){this.observer.observe(this.el,{childList:!0,subtree:!0})}function f(){this.observer.disconnect()}function m(t){const{selectedValues:s}=this,{item:i,value:n,selected:e,shiftPressed:r}=t.detail;e?(this.multiple||this.deselectSiblingItems(i),this.multiple&&r&&this.selectSiblings(i),s.set(n,i)):(s.delete(n),this.multiple&&r&&this.selectSiblings(i,!0)),this.multiple||g(i,e),this.lastSelectedItem=i,this.emitCalciteListChange()}function d(t){t.stopPropagation();const s=t.detail.oldValue,i=this.selectedValues;if(i.has(s)){const n=i.get(s);i.delete(s),i.set(t.detail.newValue,n)}}function p(t){const{key:s,target:n}=t;if(!function(t){return!!h.find((s=>s===t))}(s))return;const{items:e,multiple:r}=this,{length:o}=e,c=e.indexOf(n);if(!o||-1===c)return;t.preventDefault();const l=e[a(c+("ArrowUp"===s?-1:1),o)];g(l,!0),i(l),r||(l.selected=!0)}function b(){this.calciteListChange.emit(this.selectedValues)}function j(t){if(t.defaultPrevented)return;const s=t.target,i=this.selectedValues;"CALCITE-PICK-LIST-GROUP"===s.parentElement.tagName?(s.parentElement.remove(),Array.from(s.parentElement.children).forEach((t=>i.delete(t.value)))):(s.remove(),i.delete(s.value)),this.emitCalciteListChange()}function g(t,s){s?t.removeAttribute("tabindex"):t.setAttribute("tabindex","-1")}function A(){const{multiple:t,items:s}=this;if(0===s.length)return;if(t)return s[0].setFocus();return(s.find((t=>t.selected))||s[0]).setFocus()}function v(t){this.items=Array.from(this.el.querySelectorAll(t));let s=!1;const{items:i}=this;i.forEach((t=>{t.icon=this.getIconType(),this.multiple||(t.disableDeselect=!0,g(t,!1)),t.selected&&(s=!0,g(t,!0),this.selectedValues.set(t.value,t))}));const[n]=i;!s&&n&&g(n,!0)}function y(t){this.items.forEach((s=>{s.value!==t.value&&(s.toggleSelected(!1),this.selectedValues.has(s.value)&&this.selectedValues.delete(s.value))}))}function C(t,s=!1){if(!this.lastSelectedItem)return;const{items:i}=this,n=i.findIndex((t=>t.value===this.lastSelectedItem.value)),e=i.findIndex((s=>s.value===t.value));i.slice(Math.min(n,e),Math.max(n,e)).forEach((t=>{t.toggleSelected(!s),s?this.selectedValues.delete(t.value):this.selectedValues.set(t.value,t)}))}let O;function w(t){const s=t.detail.map((t=>t.value));let i=!1;O||(O=new Set);const e=this.items.filter((t=>{const n=t.parentElement;n.matches("calcite-pick-list-group")&&O.add(n);const e=s.includes(t.value);return t.hidden=!e,i||(i=e&&t.selected),e}));O.forEach((t=>{const s=e.some((s=>t.contains(s)));if(t.hidden=!s,!s)return;const i=n(t,"parent-item");i&&(i.hidden=!1,e.includes(i)&&Array.from(t.children).forEach((t=>t.hidden=!1)))})),O.clear(),e.length>0&&!i&&!this.multiple&&g(e[0],!0)}function F(){return this.items.map((t=>({label:t.label,description:t.description,metadata:t.metadata,value:t.value})))}const L=i=>{var{props:{disabled:n,loading:r,filterEnabled:a,dataForFilter:c,handleFilter:h,filterPlaceholder:l,el:u,theme:f}}=i,m=function(t,s){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(n=Object.getOwnPropertySymbols(t);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(t,n[e])&&(i[n[e]]=t[n[e]])}return i}(i,["props"]);const d=t("slot",null);return t(s,Object.assign({"aria-busy":r.toString(),"aria-disabled":n.toString(),role:"menu"},m),t("section",null,t("header",{class:{[o.sticky]:!0}},a?t("calcite-filter",{"aria-label":l,data:c,dir:e(u),onCalciteFilterChange:h,placeholder:l}):null,t("slot",{name:"menu-actions"})),r||n?t("calcite-scrim",{loading:r,theme:f},d):d))};export{L,u as a,m as b,f as c,y as d,d as e,v as f,F as g,w as h,l as i,A as j,p as k,c as m,j as r,C as s}